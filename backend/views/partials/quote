<div id="Contact" class="w3-modal mt-5">
  <div class="w3-modal-content w3-animate-zoom w3-center">
    <div class="w3-container" style="background-color: #5bacdf;">
      <span onclick="document.getElementById('Contact').style.display='none'"
        class="w3-button w3-display-topright ">x</span>
      <h3>QUOTE</h3>
    </div>
    <div class="w3-container ">
      <p style="font-size:10px; color:black; text-align:center">Tell us about your project and weâ€™ll give a free,
        no-obligation quote.</p>

      <form id="quote" class="w3-content">
        <% if(loggedIn) {%>
          <input id="quotename" class="w3-input" type="text" placeholder="Name*" name="name"
            value="<%= loggedIn.displayName || loggedIn.username %>" readonly="true">
          <input id="quoteemail" class="w3-input" type="text" placeholder="Email: Sign-In required*" name="email"
            value="<%= loggedIn.email %>" readonly="true">

          <% } else{ %>
            <input value="" id="quotename" class="readonly w3-input" type="text" placeholder="Name: Sign-In required*"
              name="name" required autocomplete="off">
            <input value="" id="quoteemail" class="readonly w3-input " type="text"
              placeholder="Email: Sign-In required*" name="email" required autocomplete="off">

            <% } %>
              <textarea id="quotemessage" style="width:100%;" name="message" type="text" title="message" required
                rows="5"></textarea>

              <div class="w3-center">
                <button id="quotesend" type="submit" class="btn btn-lg">Send</button>
              </div>
              <div id="quotesending" class="w3-center">
                <button class="btn btn-lg">
                  <i class="fa fa-circle-o-notch fa-spin"></i>Sending
                </button>
              </div>
              <div id="quotesuccess" class="w3-center">
                <button class="btn bg-success">
                  Sent
                </button>
              </div>
              <div id="quoteerror" class="w3-center">
                <button class="btn bg-danger">
                  Error
                </button>
              </div>
      </form>
      <script>
        $(".readonly").keydown(function (e) {
          e.preventDefault();
        });
        document.getElementById('quotesending').style.display = 'none';
        document.getElementById('quotesuccess').style.display = 'none';
        document.getElementById('quoteerror').style.display = 'none';

        document.getElementById('quote').addEventListener('submit', e => {
          e.preventDefault();
          document.getElementById('quotesending').style.display = 'block';
          document.getElementById('quotesend').style.display = 'none';

          const name = document.querySelector('#quotename').value;
          const email = document.querySelector('#quoteemail').value;
          const message = document.querySelector('#quotemessage').value;

          return fetch('/contacts/contact', {
            method: 'POST',
            headers: { 'Content-type': 'application/json' },
            body: JSON.stringify({ name: name, email: email, message: message })
          })
            .then(res => res.json())
            .then(data => {
              if (data.success) {
                document.getElementById('quotesend').style.display = 'none';
                document.getElementById('quotesending').style.display = 'none';
                document.getElementById('quotesuccess').style.display = 'block';
                // alert(data.message)
                // window.location.reload('/auth/passwordforgot');
              } else {
                document.getElementById('quotesend').style.display = 'none';
                document.getElementById('quotesending').style.display = 'none';
                document.getElementById('quoteerror').style.display = 'block';
                alert(data.msg);
                // window.location.reload('/auth/passwordforgot');
              }
            });
        });
      </script>
    </div>
    <p class="pb-3" style="font-size:10px; color:black; text-align:center">
      <strong>Note:</strong> Make sure that you
      avoid
      including any
      sensitive information that
      you don't want to share with us.
    </p>
  </div>
</div>